<script>
  Fastify.widgets['qty-breaks']['cart_break'].push({{ block.settings | json }});
</script>
{% assign cart_break = block %}

<dbtfy-cart-quantity-break class="hidden" data-item-count="{{ cart.item_count }}">
  {% for i in (1..10) %}
    {% liquid
      assign cart_break_range_key = 'cart_break_range_' | append: i
      assign cart_break_discount_code_key = 'cart_break_discount_code_' | append: i
      assign cart_break_discount_amount_key = 'cart_break_discount_amount_' | append: i
      assign cart_break_discount_type_key = 'cart_break_discount_type_' | append: i

      assign cart_break_range = cart_break.settings[cart_break_range_key]
      assign cart_break_discount_code = cart_break.settings[cart_break_discount_code_key]
      assign cart_break_discount_amount = cart_break.settings[cart_break_discount_amount_key]
      assign cart_break_discount_type = cart_break.settings[cart_break_discount_type_key]
    %}
    {% if cart_break_discount_code != blank and cart_break_discount_amount != blank %}
      {% capture discount %}
          {% if cart_break_discount_type == '%' %}
              <strong>{{ cart_break_discount_amount | append: '%' }}</strong>
          {% else %}
              <strong>{{ cart_break_discount_amount | times: 100 | money }}</strong>
          {% endif %}
      {% endcapture %}
      <div
        class="dbtfy-cart-quantity-break"
        data-range="{{ cart_break_range }}"
        data-discount="{{ discount }}"
      ></div>
    {% endif %}
  {% endfor %}
</dbtfy-cart-quantity-break>

{% schema %}
{
  "name": "t:blocks.quantity_breaks.blocks.cart_break.name",
  "settings": [
    {
      "type": "header",
      "content": "t:blocks.quantity_breaks.blocks.cart_break.settings.cart_break__1.content"
    },
    {
      "type": "range",
      "id": "cart_break_range_1",
      "label": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.label",
      "min": 2,
      "max": 20,
      "step": 1,
      "default": 2,
      "info": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.info"
    },
    {
      "type": "header",
      "content": "t:general.settings.discount.header.content",
      "info": "t:general.settings.discount.header.info_1"
    },
    {
      "type": "text",
      "id": "cart_break_discount_code_1",
      "label": "t:general.settings.discount.name.label",
      "placeholder": "20OFF"
    },
    {
      "type": "select",
      "id": "cart_break_discount_type_1",
      "label": "t:general.settings.discount.type.label",
      "default": "%",
      "options": [
        {
          "value": "%",
          "label": "t:general.settings.discount.type.options__1.label"
        },
        {
          "value": "$",
          "label": "t:general.settings.discount.type.options__2.label"
        }
      ]
    },
    {
      "type": "text",
      "id": "cart_break_discount_amount_1",
      "label": "t:general.settings.discount.amount.label",
      "info": "t:general.settings.discount.type.info",
      "placeholder": "20"
    },
    {
      "type": "header",
      "content": "t:blocks.quantity_breaks.blocks.cart_break.settings.cart_break__2.content"
    },
    {
      "type": "range",
      "id": "cart_break_range_2",
      "label": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.label",
      "min": 2,
      "max": 20,
      "step": 1,
      "default": 2,
      "info": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.info"
    },
    {
      "type": "header",
      "content": "t:general.settings.discount.header.content",
      "info": "t:general.settings.discount.header.info_1"
    },
    {
      "type": "text",
      "id": "cart_break_discount_code_2",
      "label": "t:general.settings.discount.name.label",
      "placeholder": "20OFF"
    },
    {
      "type": "select",
      "id": "cart_break_discount_type_2",
      "label": "t:general.settings.discount.type.label",
      "default": "%",
      "options": [
        {
          "value": "%",
          "label": "t:general.settings.discount.type.options__1.label"
        },
        {
          "value": "$",
          "label": "t:general.settings.discount.type.options__2.label"
        }
      ]
    },
    {
      "type": "text",
      "id": "cart_break_discount_amount_2",
      "label": "t:general.settings.discount.amount.label",
      "info": "t:general.settings.discount.type.info",
      "placeholder": "20"
    },
    {
      "type": "header",
      "content": "t:blocks.quantity_breaks.blocks.cart_break.settings.cart_break_3.content"
    },
    {
      "type": "range",
      "id": "cart_break_range_3",
      "label": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.label",
      "min": 2,
      "max": 20,
      "step": 1,
      "default": 2,
      "info": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.info"
    },
    {
      "type": "header",
      "content": "t:general.settings.discount.header.content",
      "info": "t:general.settings.discount.header.info_1"
    },
    {
      "type": "text",
      "id": "cart_break_discount_code_3",
      "label": "t:general.settings.discount.name.label",
      "placeholder": "20OFF"
    },
    {
      "type": "select",
      "id": "cart_break_discount_type_3",
      "label": "t:general.settings.discount.type.label",
      "default": "%",
      "options": [
        {
          "value": "%",
          "label": "t:general.settings.discount.type.options__1.label"
        },
        {
          "value": "$",
          "label": "t:general.settings.discount.type.options__2.label"
        }
      ]
    },
    {
      "type": "text",
      "id": "cart_break_discount_amount_3",
      "label": "t:general.settings.discount.amount.label",
      "info": "t:general.settings.discount.type.info",
      "placeholder": "20"
    },
    {
      "type": "header",
      "content": "t:blocks.quantity_breaks.blocks.cart_break.settings.cart_break_4.content"
    },
    {
      "type": "range",
      "id": "cart_break_range_4",
      "label": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.label",
      "min": 2,
      "max": 20,
      "step": 1,
      "default": 2,
      "info": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.info"
    },
    {
      "type": "header",
      "content": "t:general.settings.discount.header.content",
      "info": "t:general.settings.discount.header.info_1"
    },
    {
      "type": "text",
      "id": "cart_break_discount_code_4",
      "label": "t:general.settings.discount.name.label",
      "placeholder": "20OFF"
    },
    {
      "type": "select",
      "id": "cart_break_discount_type_4",
      "label": "t:general.settings.discount.type.label",
      "default": "%",
      "options": [
        {
          "value": "%",
          "label": "t:general.settings.discount.type.options__1.label"
        },
        {
          "value": "$",
          "label": "t:general.settings.discount.type.options__2.label"
        }
      ]
    },
    {
      "type": "text",
      "id": "cart_break_discount_amount_4",
      "label": "t:general.settings.discount.amount.label",
      "info": "t:general.settings.discount.type.info",
      "placeholder": "20"
    },
    {
      "type": "header",
      "content": "t:blocks.quantity_breaks.blocks.cart_break.settings.cart_break_5.content"
    },
    {
      "type": "range",
      "id": "cart_break_range_5",
      "label": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.label",
      "min": 2,
      "max": 20,
      "step": 1,
      "default": 2,
      "info": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.info"
    },
    {
      "type": "header",
      "content": "t:general.settings.discount.header.content",
      "info": "t:general.settings.discount.header.info_1"
    },
    {
      "type": "text",
      "id": "cart_break_discount_code_5",
      "label": "t:general.settings.discount.name.label",
      "placeholder": "20OFF"
    },
    {
      "type": "select",
      "id": "cart_break_discount_type_5",
      "label": "t:general.settings.discount.type.label",
      "default": "%",
      "options": [
        {
          "value": "%",
          "label": "t:general.settings.discount.type.options__1.label"
        },
        {
          "value": "$",
          "label": "t:general.settings.discount.type.options__2.label"
        }
      ]
    },
    {
      "type": "text",
      "id": "cart_break_discount_amount_5",
      "label": "t:general.settings.discount.amount.label",
      "info": "t:general.settings.discount.type.info",
      "placeholder": "20"
    },
    {
      "type": "header",
      "content": "t:blocks.quantity_breaks.blocks.cart_break.settings.cart_break_6.content"
    },
    {
      "type": "range",
      "id": "cart_break_range_6",
      "label": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.label",
      "min": 2,
      "max": 20,
      "step": 1,
      "default": 2,
      "info": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.info"
    },
    {
      "type": "header",
      "content": "t:general.settings.discount.header.content",
      "info": "t:general.settings.discount.header.info_1"
    },
    {
      "type": "text",
      "id": "cart_break_discount_code_6",
      "label": "t:general.settings.discount.name.label",
      "placeholder": "20OFF"
    },
    {
      "type": "select",
      "id": "cart_break_discount_type_6",
      "label": "t:general.settings.discount.type.label",
      "default": "%",
      "options": [
        {
          "value": "%",
          "label": "t:general.settings.discount.type.options__1.label"
        },
        {
          "value": "$",
          "label": "t:general.settings.discount.type.options__2.label"
        }
      ]
    },
    {
      "type": "text",
      "id": "cart_break_discount_amount_6",
      "label": "t:general.settings.discount.amount.label",
      "info": "t:general.settings.discount.type.info",
      "placeholder": "20"
    },
    {
      "type": "header",
      "content": "t:blocks.quantity_breaks.blocks.cart_break.settings.cart_break_7.content"
    },
    {
      "type": "range",
      "id": "cart_break_range_7",
      "label": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.label",
      "min": 2,
      "max": 20,
      "step": 1,
      "default": 2,
      "info": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.info"
    },
    {
      "type": "header",
      "content": "t:general.settings.discount.header.content",
      "info": "t:general.settings.discount.header.info_1"
    },
    {
      "type": "text",
      "id": "cart_break_discount_code_7",
      "label": "t:general.settings.discount.name.label",
      "placeholder": "20OFF"
    },
    {
      "type": "select",
      "id": "cart_break_discount_type_7",
      "label": "t:general.settings.discount.type.label",
      "default": "%",
      "options": [
        {
          "value": "%",
          "label": "t:general.settings.discount.type.options__1.label"
        },
        {
          "value": "$",
          "label": "t:general.settings.discount.type.options__2.label"
        }
      ]
    },
    {
      "type": "text",
      "id": "cart_break_discount_amount_7",
      "label": "t:general.settings.discount.amount.label",
      "info": "t:general.settings.discount.type.info",
      "placeholder": "20"
    },
    {
      "type": "header",
      "content": "t:blocks.quantity_breaks.blocks.cart_break.settings.cart_break_8.content"
    },
    {
      "type": "range",
      "id": "cart_break_range_8",
      "label": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.label",
      "min": 2,
      "max": 20,
      "step": 1,
      "default": 2,
      "info": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.info"
    },
    {
      "type": "header",
      "content": "t:general.settings.discount.header.content",
      "info": "t:general.settings.discount.header.info_1"
    },
    {
      "type": "text",
      "id": "cart_break_discount_code_8",
      "label": "t:general.settings.discount.name.label",
      "placeholder": "20OFF"
    },
    {
      "type": "select",
      "id": "cart_break_discount_type_8",
      "label": "t:general.settings.discount.type.label",
      "default": "%",
      "options": [
        {
          "value": "%",
          "label": "t:general.settings.discount.type.options__1.label"
        },
        {
          "value": "$",
          "label": "t:general.settings.discount.type.options__2.label"
        }
      ]
    },
    {
      "type": "text",
      "id": "cart_break_discount_amount_8",
      "label": "t:general.settings.discount.amount.label",
      "info": "t:general.settings.discount.type.info",
      "placeholder": "20"
    },
    {
      "type": "header",
      "content": "t:blocks.quantity_breaks.blocks.cart_break.settings.cart_break_9.content"
    },
    {
      "type": "range",
      "id": "cart_break_range_9",
      "label": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.label",
      "min": 2,
      "max": 20,
      "step": 1,
      "default": 2,
      "info": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.info"
    },
    {
      "type": "header",
      "content": "t:general.settings.discount.header.content",
      "info": "t:general.settings.discount.header.info_1"
    },
    {
      "type": "text",
      "id": "cart_break_discount_code_9",
      "label": "t:general.settings.discount.name.label",
      "placeholder": "20OFF"
    },
    {
      "type": "select",
      "id": "cart_break_discount_type_9",
      "label": "t:general.settings.discount.type.label",
      "default": "%",
      "options": [
        {
          "value": "%",
          "label": "t:general.settings.discount.type.options__1.label"
        },
        {
          "value": "$",
          "label": "t:general.settings.discount.type.options__2.label"
        }
      ]
    },
    {
      "type": "text",
      "id": "cart_break_discount_amount_9",
      "label": "t:general.settings.discount.amount.label",
      "info": "t:general.settings.discount.type.info",
      "placeholder": "20"
    },
    {
      "type": "header",
      "content": "t:blocks.quantity_breaks.blocks.cart_break.settings.cart_break_10.content"
    },
    {
      "type": "range",
      "id": "cart_break_range_10",
      "label": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.label",
      "min": 2,
      "max": 20,
      "step": 1,
      "default": 2,
      "info": "t:blocks.quantity_breaks.blocks.cart_break.settings.range.info"
    },
    {
      "type": "header",
      "content": "t:general.settings.discount.header.content",
      "info": "t:general.settings.discount.header.info_1"
    },
    {
      "type": "text",
      "id": "cart_break_discount_code_10",
      "label": "t:general.settings.discount.name.label",
      "placeholder": "20OFF"
    },
    {
      "type": "select",
      "id": "cart_break_discount_type_10",
      "label": "t:general.settings.discount.type.label",
      "default": "%",
      "options": [
        {
          "value": "%",
          "label": "t:general.settings.discount.type.options__1.label"
        },
        {
          "value": "$",
          "label": "t:general.settings.discount.type.options__2.label"
        }
      ]
    },
    {
      "type": "text",
      "id": "cart_break_discount_amount_10",
      "label": "t:general.settings.discount.amount.label",
      "info": "t:general.settings.discount.type.info",
      "placeholder": "20"
    }
  ],
  "presets": [
    {
      "name": "t:blocks.quantity_breaks.blocks.cart_break.name"
    }
  ]
}
{% endschema %}

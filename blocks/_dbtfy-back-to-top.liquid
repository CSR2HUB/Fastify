{% render 'widget-settings', key: 'back-to-top', settings: block.settings %}

{% render 'widget-blocker-warning',
  enabled: settings.dbtfy_back_to_top,
  type: 'widget',
  as: 'block',
  name: 'Back to top',
  id: block
%}

{% if request.design_mode or settings.dbtfy_back_to_top %}
  {{ 'dbtfy-back-to-top.css' | asset_url | stylesheet_tag }}

  <back-to-top
    class="dbtfy-back-to-top color-{{ block.settings.custom_color_scheme }} dbtfy-color-{{ block.settings.color_scheme }} dbtfy-back-to-top--{{ block.settings.position }} show-on--{{ block.settings.show_on }}"
    style="border-radius: {{ block.settings.radius }}px; border-width:{{ block.settings.border }}px;"
    data-display-after-scrolling="{{ block.settings.display_after_scrolling }}"
    {{ block.shopify_attributes }}
  >
    {% if block.settings.enable_background_animation %}
      <span class="absolute left-0 bottom-0 w-full dbtfy-back-to-top__scroll-animation-container"></span>
    {% endif %}
    {% if block.settings.custom_icon != blank %}
      <img
        src="{{ block.settings.custom_icon | image_url: width: 24, height: 24 }}"
        alt="Back to top"
        class="dbtfy-back-to-top__image"
        width="24"
        height="24"
      >
    {% else %}
      {% case block.settings.icon %}
        {% when '1' %}
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000000">
            <path d="M440-160v-487L216-423l-56-57 320-320 320 320-56 57-224-224v487h-80Z"/>
          </svg>
        {% when '2' %}
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000000">
            <path d="M480-528 296-344l-56-56 240-240 240 240-56 56-184-184Z"/>
          </svg>
        {% when '3' %}
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000000">
            <path d="M240-240v-80h480v80H240Zm240-496 240 240-56 56-184-184-184 184-56-56 240-240Z"/>
          </svg>
        {% when '4' %}
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000000">
            <path d="m296-105-56-56 240-240 240 240-56 56-184-183-184 183Zm0-240-56-56 240-240 240 240-56 56-184-183-184 183Zm0-240-56-56 240-240 240 240-56 56-184-183-184 183Z"/>
          </svg>
        {% when '5' %}
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000000">
            <path d="m357-384 123-123 123 123 57-56-180-180-180 180 57 56ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/>
          </svg>
        {% when '6' %}
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000000">
            <path d="M480-640 280-440l56 56 104-103v407h80v-407l104 103 56-56-200-200ZM146-260q-32-49-49-105T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 59-17 115t-49 105l-58-58q22-37 33-78t11-84q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 43 11 84t33 78l-58 58Z"/>
          </svg>
        {% when '7' %}
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000000">
            <path d="M440-727 256-544l-56-56 280-280 280 280-56 57-184-184v287h-80v-287Zm0 487v-120h80v120h-80Zm0 160v-80h80v80h-80Z"/>
          </svg>
      {% endcase %}
    {% endif %}
  </back-to-top>

  <script src="{{ 'dbtfy-back-to-top.js' | asset_url }}" defer="defer"></script>
{% endif %}

{% schema %}
{
  "name": "t:blocks.back-to-top.name",
  "settings": [
    {
      "type": "select",
      "id": "show_on",
      "label": "t:sections.all.show_on.label",
      "default": "both",
      "options": [
        {
          "value": "desktop-only",
          "label": "t:sections.all.show_on.options__1.label"
        },
        {
          "value": "mobile-only",
          "label": "t:sections.all.show_on.options__2.label"
        },
        {
          "value": "both",
          "label": "t:sections.all.show_on.options__3.label"
        }
      ]
    },
    {
      "type": "select",
      "id": "position",
      "label": "t:general.settings.position.label",
      "default": "right",
      "options": [
        {
          "value": "left",
          "label": "t:general.settings.alignment.option__4"
        },
        {
          "value": "center",
          "label": "t:general.settings.alignment.option__5"
        },
        {
          "value": "right",
          "label": "t:general.settings.alignment.option__6"
        }
      ]
    },
    {
      "type": "select",
      "id": "icon",
      "label": "t:blocks.back-to-top.settings.icon.label",
      "default": "1",
      "options": [
        {
          "value": "1",
          "label": "t:blocks.back-to-top.settings.icon.options__1.label"
        },
        {
          "value": "2",
          "label": "t:blocks.back-to-top.settings.icon.options__2.label"
        },
        {
          "value": "3",
          "label": "t:blocks.back-to-top.settings.icon.options__3.label"
        },
        {
          "value": "4",
          "label": "t:blocks.back-to-top.settings.icon.options__4.label"
        },
        {
          "value": "5",
          "label": "t:blocks.back-to-top.settings.icon.options__5.label"
        },
        {
          "value": "6",
          "label": "t:blocks.back-to-top.settings.icon.options__6.label"
        },
        {
          "value": "7",
          "label": "t:blocks.back-to-top.settings.icon.options__7.label"
        }
      ]
    },
    {
      "type": "image_picker",
      "id": "custom_icon",
      "label": "t:blocks.back-to-top.settings.icon_img.label"
    },
    {
      "type": "checkbox",
      "id": "enable_background_animation",
      "default": true,
      "label": "t:blocks.back-to-top.settings.background_animation.label"
    },
    {
      "type": "range",
      "id": "display_after_scrolling",
      "label": "t:blocks.back-to-top.settings.display_scrolling.label",
      "min": 0,
      "max": 1000,
      "default": 200,
      "step": 100,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "border",
      "label": "t:blocks.back-to-top.settings.border_size.label",
      "min": 0,
      "max": 50,
      "default": 1,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "t:blocks.back-to-top.settings.border_radius.label",
      "default": 8
    },
    {
      "type": "header",
      "content": "t:sections.all.color_schemes.header.heading.label",
      "info": "t:sections.all.color_schemes.header.info.content"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "label": "t:sections.all.color_schemes.default.label",
      "options": [
        {
          "value": "scheme-1",
          "label": "t:sections.all.color_schemes.default.options__1.label"
        },
        {
          "value": "scheme-2",
          "label": "t:sections.all.color_schemes.default.options__2.label"
        },
        {
          "value": "scheme-3",
          "label": "t:sections.all.color_schemes.default.options__3.label"
        },
        {
          "value": "scheme-4",
          "label": "t:sections.all.color_schemes.default.options__4.label"
        },
        {
          "value": "custom",
          "label": "t:general.settings.size.option__9"
        }
      ],
      "default": "scheme-4"
    },
    {
      "type": "color_scheme",
      "id": "custom_color_scheme",
      "label": "t:sections.all.color_schemes.custom.label",
      "default": "scheme-1"
    }
  ]
}
{% endschema %}
